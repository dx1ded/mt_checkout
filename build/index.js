(()=>{var e={683:function(){var e=this,t=document.querySelectorAll(".select"),c="select__item--active";function n(e){e.classList.toggle("select--opened")}function r(e,t){var n=e.querySelector(".select__display"),r=e.querySelector(".".concat(c)),a=t.target;n.textContent=a.textContent,r.classList.remove(c),a.classList.add(c)}t.forEach((function(t){var c=t.querySelectorAll(".select__item");t.addEventListener("click",n.bind(e,t)),c.forEach((function(c){return c.addEventListener("click",r.bind(e,t))}))}))},793:()=>{var e=document.querySelector("[data-tab-handler]"),t=document.querySelector("[data-tab-status]");e.addEventListener("click",(function(){var c=document.querySelector("[data-tab='']");document.querySelector("[data-tab='true']").setAttribute("data-tab",""),c.setAttribute("data-tab","true");var n=e.textContent,r=t.textContent;e.textContent=e.dataset.tabHandler,t.textContent=t.dataset.tabStatus,e.setAttribute("data-tab-handler",n),t.setAttribute("data-tab-status",r)}))}},t={};function c(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,c),a.exports}(()=>{"use strict";var e=function(){return JSON.parse(localStorage.getItem("products"))},t=function(){return JSON.parse(localStorage.getItem("products")).filter((function(e){return!e.isDeleted})).length},n=function(t){var c=e(),n=c.findIndex((function(e){return e.id===t}));return c[n]},r=function(t){var c=e(),n=c.findIndex((function(e){return e.id===t}));c[n].isDeleted?c.splice(n,1):c[n].isDeleted=!0,localStorage.setItem("products",JSON.stringify(c))},a=function(t){var c=e(),n=c.findIndex((function(e){return e.id===t}));c[n].isDeleted=!1,localStorage.setItem("products",JSON.stringify(c))};e()||localStorage.setItem("products",JSON.stringify([{id:"1",name:"Таймер кухонный, электронный, Baldr",imageUrl:"./images/products/product-1.png",properties:[{key:"Бренд",value:"Baldr"}],count:1,maxCount:5,price:126281},{id:"2",name:"Газобетонный стеновой блок D400 600x300x250",imageUrl:"./images/products/product-2.png",properties:[{key:"Цвет",value:"бежевый"},{key:"Комплект",value:"полный"},{key:"Состояние",value:"новый"},{key:"Размер",value:"28"},{key:"Цвет рамки",value:"золотой"}],count:2,maxCount:8,price:1242},{id:"3",isDeleted:!0,name:"Робот-пылесос PVCR 0726W (POLARIS), Polaris бежевый",imageUrl:"./images/products/product-2.png",properties:[{key:"Цвет",value:"бежевый"},{key:"Комплект",value:"полный"},{key:"Состояние",value:"новый"},{key:"Размер",value:"28"},{key:"Цвет рамки",value:"золотой"}],count:11,maxCount:124,price:681},{id:"4",name:"Робот-пылесос PVCR 0726W (POLARIS), Polaris бежевый цвет официальный магазин Поларис",imageUrl:"./images/products/product-3.png",properties:[{key:"Цвет",value:"бежевый"},{key:"Комплект",value:"полный"},{key:"Состояние",value:"новый"},{key:"Размер",value:"28"},{key:"Цвет рамки",value:"золотой"}],count:11,maxCount:20,price:681}]));var o=function(e){return String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")},i=function(e){var t=e.id,c=e.isDeleted,n=e.name,r=e.imageUrl,a=e.properties,i=e.count,s=e.maxCount,l=e.price;return c?'\n      <article class="mtcheck-product mtcheck-product--deleted" data-id="'.concat(t,'">\n        <div class="mtcheck-product__left">\n          <div class="mtcheck-product__info">\n            <p class="text mtcheck-product__name">').concat(n,'</p>\n          </div>\n        </div>\n        <div class="mtcheck-product__right">\n          <button class="btn-reset link mtcheck-product__restore" data-action="product-restore">восстановить</button>\n          <div class="mtcheck-product__wrapper">\n            <button class="btn-reset mtcheck-product__remove" aria-label="Полностью удалить товар из корзины"></button>\n          </div>\n        </div>\n      </article>\n      '):'\n      <article class="mtcheck-product" data-id="'.concat(t,'" data-price="').concat(l,'">\n        <div class="mtcheck-product__left">\n          <label class="checkbox">\n            <input type="checkbox" class="visually-hidden checkbox__input">\n            <span class="checkbox__display"></span>\n          </label>\n          <a href="#" class="mtcheck-product__image">\n            <img src="').concat(r,'" alt="Изображение товара">\n          </a>\n          <div class="mtcheck-product__info">\n            <a href="#" class="text text--md text--primary mtcheck-product__name">').concat(n,'</a>\n            <div class="mtcheck-product__properties">\n              ').concat(a?a.map((function(e){var t=e.key,c=e.value;return'\n                    <span class="text text--xs text--secondary mtcheck-product__property">\n                      '.concat(t,": ").concat(c,"\n                    </span>\n                  ")})).join(""):"",'\n            </div>\n          </div>\n        </div>\n        <div class="mtcheck-product__right">\n          <div class="mtcheck-product__count">\n            <div class="counter">\n              <input type="number" value="').concat(i,'" min="1" data-max="').concat(s,'" class="counter__display">\n              <input type="button" value="-" class="btn-reset counter__action counter__action--decrement">\n              <input type="button" value="+" class="btn-reset counter__action counter__action--increment">\n            </div>\n          </div>\n          <div class="mtcheck-product__wrapper">\n            <p class="text text--md text--primary mtcheck-product__price">').concat(o(l*i),' <span>&#8381;</span></p>\n            <button class="btn-reset mtcheck-product__remove" aria-label="Удалить товар из корзины"></button>\n          </div>\n        </div>\n      </article>\n      ')};function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?s(e,t):void 0}}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(){var e=u(document.querySelectorAll(".mtcheck-product .checkbox__input:checked"));return{price:e.reduce((function(e,t){var c=t.closest(".mtcheck-product");return e+c.querySelector(".counter__display").value*c.dataset.price}),0),count:e.length}}function m(e){var t=e.querySelector(".mtcheck-product__price"),c=e.querySelector(".counter__display").value,n=e.dataset.price;t.childNodes[0].textContent="".concat(o(n*c)," ")}var p=document.querySelector(".mtcheck-products__actions"),_=p.querySelector("#remove-all"),v="mtcheck-products__actions--active";function h(){if(!document.querySelectorAll(".mtcheck-product__left .checkbox__input:checked").length)return p.classList.remove(v);p.classList.add(v)}function y(){var e=document.querySelector(".mtcheck-confirm .mtcheck-table"),t=d().price,c=document.querySelector("[name=delivery-type]:checked").parentElement,n=c.querySelector(".radio__text").textContent,r=c.dataset.price,a=document.querySelector("[name=pay-type]:checked").parentElement.querySelector(".radio__text").textContent;return e.innerHTML='\n    <div class="mtcheck-table__item">\n      <p class="text text--md text--primary mtcheck-table__item-name">\n        Доставка \n        <span>('.concat(n,')</span>\n      </p>\n      <span class="text text--md text--primary mtcheck-table__item-value">').concat(r,' &#8381;</span>\n    </div>\n    <div class="mtcheck-table__item mtcheck-table__item--margin">\n      <p class="text text--md text--primary mtcheck-table__item-name">\n        Оплата \n        <span>(').concat(a,')</span>\n      </p>\n    </div>\n    <div class="mtcheck-table__item">\n      <p class="text text--md text--primary mtcheck-table__item-name">Бонусные баллы</p>\n      <span class="text text--md text--primary mtcheck-table__item-value">400 баллов</span>\n    </div>\n    <div class="mtcheck-table__item">\n      <p class="text text--md text--primary mtcheck-table__item-name">\n        Скидка группе покупателей, 5% \n        <span>(серебрянный клиент)</span>\n      </p>\n      <span class="text text--md text--primary mtcheck-table__item-value">- 650 &#8381;</span>\n    </div>\n    ').concat(window.coupon?'\n        <div class="mtcheck-table__item">\n          <p class="text text--md text--primary mtcheck-table__item-name">\n            Купон на скидку \n            <span>('.concat(window.coupon,')</span>\n          </p>\n          <span class="text text--md text--primary mtcheck-table__item-value">- 5000 &#8381;</span>\n        </div>\n        '):"","\n    ").concat(window.certificate?'\n        <div class="mtcheck-table__item">\n          <p class="text text--md text--primary mtcheck-table__item-name">\n            Сертификат \n            <span>('.concat(window.certificate,')</span>\n          </p>\n          <span class="text text--md text--primary mtcheck-table__item-value">- 5000 &#8381;</span>\n        </div>\n        '):"",'\n    <div class="mtcheck-table__item">\n      <p class="text text--md text--primary mtcheck-table__item-name">\n        Скидка за сумму заказа, 3%\n      </p>\n      <span class="text text--md text--primary mtcheck-table__item-value">- 4000 &#8381;</span>\n    </div>\n    <div class="mtcheck-table__item">\n      <p class="text text--md text--primary mtcheck-table__item-name">\n        Налог НДС, 20%\n      </p>\n      <span class="text text--md text--primary mtcheck-table__item-value">').concat(o(.2*t)," &#8381;</span>\n    </div>\n  "),t}function k(){var e=document.querySelector(".mtcheck-summary .mtcheck-table"),t=d().price,c=document.querySelector("[name=delivery-type]:checked").parentElement,n=c.querySelector(".radio__text").textContent,r=c.dataset.price,a=document.querySelector("[name=pay-type]:checked").parentElement.querySelector(".radio__text").textContent;return e.innerHTML='\n    <div class="mtcheck-table__item">\n      <p class="text mtcheck-table__item-name">\n        Доставка \n        <span>('.concat(n,')</span>\n      </p>\n      <span class="text mtcheck-table__item-value">').concat(r,' &#8381;</span>\n    </div>\n    <div class="mtcheck-table__item mtcheck-table__item--margin">\n      <p class="text mtcheck-table__item-name">\n        Оплата \n        <span>(').concat(a,')</span>\n      </p>\n    </div>\n    <div class="mtcheck-table__item">\n      <p class="text mtcheck-table__item-name">Товары, с учетом налогов</p>\n      <span class="text mtcheck-table__item-value">').concat(o(t),' &#8381;</span>\n    </div>\n    <div class="mtcheck-table__item">\n      <p class="text mtcheck-table__item-name">Скидка, %</p>\n      <span class="text mtcheck-table__item-value">- 650 &#8381;</span>\n    </div>\n  '),t}function f(e){document.querySelector(".mtcheck-confirm .mtcheck-total__sum").childNodes[0].textContent="".concat(o(e)," ")}function x(e){document.querySelector(".mtcheck-summary__sum").childNodes[0].textContent="".concat(o(e)," ")}function b(e){var t=e.parentElement,c=e.querySelector(".counter__display"),n=e.querySelector(".counter__action--increment"),r=e.querySelector(".counter__action--decrement"),a=+c.dataset.max,o={"+":c.stepUp.bind(c),"-":c.stepDown.bind(c)};c.addEventListener("input",(function(e){var n=+e.target.value;if(!n)return c.value=1;S(t,a,n),m(e.target.closest(".mtcheck-product")),w();var r=y();k(),f(r),x(r)})),[n,r].forEach((function(e){return e.addEventListener("click",(function(e){var n=e.target.value;o[n](),S(t,a,+c.value),m(e.target.closest(".mtcheck-product")),w();var r=y();k(),f(r),x(r)}))}))}function S(e,t,c){var n=e.querySelector(".mtcheck-product__sign");if(!(c<=t)||n){if(c<=t&&n)return n.remove();if(!n){var r=document.createElement("span");r.classList.add("text","text--xs","mtcheck-product__sign"),r.textContent="нет в выбранном количестве",e.insertAdjacentElement("beforeend",r)}}}_.addEventListener("click",(function(){document.querySelectorAll(".mtcheck-product__left .checkbox__input:checked").forEach((function(e){var t=e.closest(".mtcheck-product"),c=t.dataset.id;r(c),A(t,c)}))}));var g=document.querySelector(".mtcheck-products__list"),q=e(),E=document.querySelector(".mtcheck-products__head .checkbox__text"),C=document.querySelector("#select-all");function A(e,c){if(e.classList.contains("mtcheck-product--deleted"))return e.remove();var o=e.nextSibling,s=(new DOMParser).parseFromString(i(n(c)),"text/html").body.firstChild,l=s.querySelector(".mtcheck-product__remove"),u=s.querySelector(".mtcheck-product__restore");l.addEventListener("click",(function(e){var t=e.target.closest(".mtcheck-product"),c=t.dataset.id;r(c),A(t,c),w();var n=y();k(),f(n),x(n)})),u.addEventListener("click",(function(e){var t=e.target.closest(".mtcheck-product"),c=t.dataset.id;a(c),L(t,c),w();var n=y();k(),f(n),x(n)})),E.textContent="Выбрать все (".concat(t(),")"),e.remove(),g.insertBefore(s,o),h()}function L(c,a){var o=c.nextSibling,s=(new DOMParser).parseFromString(i(n(a)),"text/html").body.firstChild,l=s.querySelector(".checkbox__input"),u=s.querySelector(".mtcheck-product__remove"),d=s.querySelector(".counter");C.checked&&(l.checked=!0),l.addEventListener("change",(function(){h(),e().filter((function(e){return!e.isDeleted}))!==document.querySelectorAll(".mtcheck-product__left .checkbox__input:checked")&&(C.checked=!1),w();var t=y();k(),f(t),x(t)})),u.addEventListener("click",(function(e){var t=e.target.closest(".mtcheck-product"),c=t.dataset.id;r(c),A(t,c),w();var n=y();k(),f(n),x(n)})),b(d),E.textContent="Выбрать все (".concat(t(),")"),c.remove(),g.insertBefore(s,o),h()}function w(){var e=document.querySelector(".mtcheck-products__count"),t=document.querySelector(".mtcheck-products__sum"),c=d(),n=c.count,r=c.price;e.textContent="Товаров, ".concat(n," шт."),t.childNodes[0].textContent="".concat(o(r)," ")}q.forEach((function(t){var c=(new DOMParser).parseFromString(i(t),"text/html").body.firstChild,n=c.querySelector(".checkbox__input"),o=c.querySelector(".mtcheck-product__remove"),s=c.querySelector(".mtcheck-product__restore"),l=c.querySelector(".counter");n&&n.addEventListener("change",(function(){h(),e().filter((function(e){return!e.isDeleted}))!==document.querySelectorAll(".mtcheck-product__left .checkbox__input:checked")&&(C.checked=!1),w();var t=y();k(),f(t),x(t)})),o&&o.addEventListener("click",(function(e){var t=e.target.closest(".mtcheck-product"),c=t.dataset.id;r(c),A(t,c),w();var n=y();k(),f(n),x(n)})),s&&s.addEventListener("click",(function(e){var t=e.target.closest(".mtcheck-product"),c=t.dataset.id;a(c),L(t,c),w();var n=y();k(),f(n),x(n)})),b(l),g.insertAdjacentElement("afterbegin",c)}));c(793),c(683);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var c=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=c){var n,r,a=[],o=!0,i=!1;try{for(c=c.call(e);!(o=(n=c.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw r}}return a}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var c=e.container,n=e.type,r=e.text,a=e.isClose,o=c.querySelector(".message");o&&o.remove();var i=document.createElement("div");if(i.classList.add("message","message--".concat(n)),i.textContent=r,Object.entries(t).forEach((function(e){var t=D(e,2),c=t[0],n=t[1];i.style[c]=n})),a){var s=document.createElement("button");s.classList.add("message__close"),s.addEventListener("click",(function(){return i.remove()})),s.setAttribute("type","button"),s.setAttribute("aria-label","Закрыть вспывающее сообщение"),i.appendChild(s)}c.appendChild(i)}var O=document.querySelector(".mtcheck-offers__coupon"),N=document.querySelector(".mtcheck-offers__certificate"),P={top:"0",right:"-20px",maxWidth:"322px",transform:"translateX(100%)"};window.matchMedia("(max-width: 1023px)").matches&&(P={bottom:"-10px",left:"0",maxWidth:"322px",transform:"translateY(100%)"}),O.addEventListener("submit",(function(e){e.preventDefault();var t="FFF111",c=e.target.querySelector("[type=text]").value;if(t===c){I({container:O,type:"success",text:"Купон ".concat(t," на сумму 5000Р успешно использован!"),isClose:!0},P),window.coupon=t;var n=y();k(),f(n),x(n)}else I(""===c?{container:O,type:"danger",text:"Поле должно быть заполнено",isClose:!0}:{container:O,type:"danger",text:"Купон ".concat(c," не найден"),isClose:!0},P)})),N.addEventListener("submit",(function(e){e.preventDefault();var t="AAA111",c=e.target.querySelector("[type=text]").value;if(t===c){I({container:N,type:"success",text:"Сертификат ".concat(t," на сумму 7000Р успешно использован!"),isClose:!0},P),window.certificate=t;var n=y();k(),f(n),x(n)}else I(""===c?{container:N,type:"danger",text:"Поле должно быть заполнено",isClose:!0}:{container:N,type:"danger",text:"Сертификат ".concat(c," не найден"),isClose:!0},P)}));var j=document.querySelector(".mtcheck-products__head .checkbox__text"),M=document.querySelector("#select-all");function U(){var e=M.checked,t=document.querySelectorAll(".mtcheck-product__left .checkbox__input");e?t.forEach((function(e){return e.checked=!0})):t.forEach((function(e){return e.checked=!1})),h(),w();var c=y();k(),f(c),x(c)}j.textContent="Выбрать все (".concat(t(),")"),M.addEventListener("change",U),M.checked&&U(),document.querySelectorAll("[name=delivery-type]").forEach((function(e){return e.addEventListener("change",(function(){var e=y();k(),f(e),x(e)}))})),document.querySelectorAll("[name=pay-type]").forEach((function(e){return e.addEventListener("change",(function(){var e=y();k(),f(e),x(e)}))})),w();var F=y();k(),f(F),x(F)})()})();